<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.querySelector(".menu-toggle");
    const navLinks = document.querySelector(".nav-links");
    const links = document.querySelectorAll(".nav-links a");

    // ✅ Resalta el enlace activo de forma más robusta
    const currentPath = window.location.pathname.replace(/\/$/, "");

    links.forEach((link) => {
      const href = link.getAttribute("href")?.replace(/\/$/, "");
      if (href && currentPath.startsWith(href)) {
        link.classList.add("active");
      }
    });

    if (toggle) {
      toggle.addEventListener("click", () => {
        navLinks?.classList.toggle("open");
      });
    }

    links.forEach((link) => {
      link.addEventListener("click", (e) => {
        const href = link.getAttribute("href");
        if (href && href.startsWith("#")) {
          e.preventDefault();
          const section = document.querySelector(href);
          if (section) {
            section.scrollIntoView({ behavior: "smooth" });
          }
          navLinks?.classList.toggle("open");
        } else {
          navLinks?.classList.toggle("open");
        }
      });
    });
  });
</script>
